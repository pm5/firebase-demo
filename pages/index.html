<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Canner demo app</title>
  <meta name="description" content="canner demo app">
  <link href="/statics/style/style.css" rel="stylesheet">
  <script src="https://static.canner.io/canner-api/stable/sdk.js"></script>
  <script
    src="https://code.jquery.com/jquery-3.2.1.min.js"
    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"></script>
</head>
<body>
  <div class="container">
    <h2>It's canner app</h2>
    <div id="posts">
      loading...
    </div>
  </div>
</body>

<script>
  var db = new CannerApi(<YOUR API KEY>).connect();

  db.array('posts').find(function(err, docs) {
    renderPosts(docs);
  })

  function renderPosts(posts) {
    var result = [];
    posts.forEach(function(post) {
      result.push(postTemplate(post.title, post.content));
    });
    $("#posts").html(result);
  }
    
  function postTemplate(title, content) {
    var post = '<div class="post">';
    post +=      '<h1>' + title + '</h1>';
    post +=      '<div class="content">' + content + '</div>';
    post +=    '</div>';
    return post;
  }
</script>
</html>